name: Dependencies review âš¡ï¸
run-name: Dependencies review âš¡ï¸

on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:

  pull_request:
    branches: ["main"]

permissions: {}

env:
  environment: base
  timezone: ${{ vars.TIMEZONE }}

jobs:
  # 1. Setup test infrastructure
  setup:
    name: Infrastructure ğŸ”§
    runs-on: ubuntu-latest
    outputs:
      environment: ${{ env.environment }}
      timezone: ${{ env.timezone }}
    steps:
      - name: Environment ğŸ§ª
        run: echo "Environment set to ${{ env.environment }}"

      - name: Timezone ğŸŒ
        run: echo "Timezone set to ${{ env.timezone }}"

    # 2. Review
  dependencies:
    needs: [setup]
    uses: https://github.com/ministryofjustice/devsecops-actions/.github/workflows/_dependency.yml@feat/dependency-workflow
    secrets:
      github-token: ${{ secrets.GITHUB_TOKEN }}
