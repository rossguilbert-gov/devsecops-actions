<mxfile host="65bd71144e">
    <diagram name="Cruft Action Flow" id="cruft-action-flow">
        <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1000" pageHeight="1800" background="#0d1117" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title" value="Cruft Template Synchronization Action" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="100" y="40" width="800" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="subtitle" value="ministryofjustice/devsecops-actions/cruft" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#8b949e;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="100" y="75" width="800" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="start" value="START" style="ellipse;whiteSpace=wrap;html=1;fillColor=#238636;strokeColor=#2ea043;fontColor=#ffffff;fontSize=12;fontStyle=1;fontFamily=Segoe UI;shadow=1;" vertex="1" parent="1">
                    <mxGeometry x="450" y="130" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8b949e;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="start" target="step1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="step1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1c2d41;strokeColor=#388bfd;strokeWidth=2;shadow=1;" vertex="1" parent="1">
                    <mxGeometry x="200" y="230" width="600" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="step1-icon" value="âš’ï¸" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;" vertex="1" parent="1">
                    <mxGeometry x="220" y="245" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step1-title" value="Install Python &amp; Cruft" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="300" y="245" width="480" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="step1-desc" value="cruft/install@main&lt;br&gt;Setup Python 3.12 â€¢ Install Cruft dependencies â€¢ Configure environment" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#8b949e;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="300" y="275" width="480" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8b949e;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="step1" target="decision1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="decision1" value="private == 'true' ?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#21262d;strokeColor=#30363d;strokeWidth=2;fontColor=#c9d1d9;fontSize=13;fontStyle=1;fontFamily=Segoe UI;shadow=1;" vertex="1" parent="1">
                    <mxGeometry x="400" y="370" width="200" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="arrowYes1" value="YES" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3fb950;strokeWidth=2;endArrow=block;endFill=1;fontColor=#3fb950;fontSize=12;fontStyle=1;fontFamily=Segoe UI;" edge="1" parent="1" source="decision1" target="step2">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="step2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#341a00;strokeColor=#9e6a03;strokeWidth=2;shadow=1;" vertex="1" parent="1">
                    <mxGeometry x="200" y="510" width="300" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="step2-icon" value="ðŸ”‘" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;" vertex="1" parent="1">
                    <mxGeometry x="220" y="525" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step2-title" value="HTTPS Token Authentication" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="300" y="525" width="180" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="step2-desc" value="cruft/authenticate@main&lt;br&gt;Configure GitHub App or token auth" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#8b949e;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="300" y="555" width="180" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="merge1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8b949e;strokeWidth=2;endArrow=none;endFill=0;" edge="1" parent="1" source="step2" target="merge-point">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="350" y="640" as="sourcePoint"/>
                        <mxPoint x="500" y="640" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrowNo1" value="NO" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#f85149;strokeWidth=2;endArrow=block;endFill=1;fontColor=#f85149;fontSize=12;fontStyle=1;fontFamily=Segoe UI;" edge="1" parent="1" source="decision1" target="skip">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="skip" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2c0b0e;strokeColor=#da3633;strokeWidth=2;shadow=1;dashed=1;" vertex="1" parent="1">
                    <mxGeometry x="550" y="510" width="250" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="skip-icon" value="â­ï¸" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;" vertex="1" parent="1">
                    <mxGeometry x="570" y="525" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="skip-title" value="Skip Authentication" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="640" y="525" width="150" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="skip-desc" value="Public template&lt;br&gt;No authentication needed" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#8b949e;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="640" y="555" width="150" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="merge2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8b949e;strokeWidth=2;endArrow=none;endFill=0;" edge="1" parent="1" source="skip" target="merge-point">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="675" y="640" as="sourcePoint"/>
                        <mxPoint x="500" y="640" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="merge-point" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#8b949e;strokeColor=#8b949e;" vertex="1" parent="1">
                    <mxGeometry x="490" y="630" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="arrow-to-step3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8b949e;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="merge-point" target="step3">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="step3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1c2d41;strokeColor=#388bfd;strokeWidth=2;shadow=1;" vertex="1" parent="1">
                    <mxGeometry x="200" y="690" width="600" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="step3-icon" value="ðŸ”Ž" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;" vertex="1" parent="1">
                    <mxGeometry x="220" y="705" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step3-title" value="Check for Template Updates" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="300" y="705" width="480" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="step3-desc" value="cruft/check@main&lt;br&gt;Compare with upstream template â€¢ Run cruft check â€¢ Conditionally apply updates" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#8b949e;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="300" y="735" width="480" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="arrow3b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8b949e;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="step3" target="step4">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="step4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1c2d41;strokeColor=#388bfd;strokeWidth=2;shadow=1;" vertex="1" parent="1">
                    <mxGeometry x="200" y="830" width="600" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="step4-icon" value="âœï¸" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;" vertex="1" parent="1">
                    <mxGeometry x="220" y="845" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step4-title" value="Create Pull Request" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="300" y="845" width="480" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="step4-desc" value="cruft/create@main&lt;br&gt;Configure token â€¢ Create branch â€¢ Generate PR with verified commits â€¢ Apply labels" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#8b949e;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="300" y="875" width="480" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8b949e;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="step4" target="decision2">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="decision2" value="changes found ?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#21262d;strokeColor=#30363d;strokeWidth=2;fontColor=#c9d1d9;fontSize=13;fontStyle=1;fontFamily=Segoe UI;shadow=1;" vertex="1" parent="1">
                    <mxGeometry x="400" y="970" width="200" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="arrowNo2" value="NO" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#f85149;strokeWidth=2;endArrow=block;endFill=1;fontColor=#f85149;fontSize=12;fontStyle=1;fontFamily=Segoe UI;" edge="1" parent="1" source="decision2" target="end-no">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="end-no" value="END&lt;br&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;No changes&lt;/font&gt;" style="ellipse;whiteSpace=wrap;html=1;fillColor=#484f58;strokeColor=#6e7681;fontColor=#ffffff;fontSize=12;fontStyle=1;fontFamily=Segoe UI;shadow=1;" vertex="1" parent="1">
                    <mxGeometry x="700" y="970" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrowYes2" value="YES" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3fb950;strokeWidth=2;endArrow=block;endFill=1;fontColor=#3fb950;fontSize=12;fontStyle=1;fontFamily=Segoe UI;" edge="1" parent="1" source="decision2" target="step5">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="step5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0d1e1a;strokeColor=#2ea043;strokeWidth=2;shadow=1;" vertex="1" parent="1">
                    <mxGeometry x="200" y="1110" width="600" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="step5-icon" value="ðŸš€" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;" vertex="1" parent="1">
                    <mxGeometry x="220" y="1125" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step5-title" value="Push and Create Pull Request" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="300" y="1125" width="480" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="step5-desc" value="Push commits with GitHub App verification â€¢ Create PR â€¢ Apply labels &amp; reviewers" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#8b949e;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="300" y="1155" width="480" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="arrow-end" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8b949e;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="step5" target="end">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="end" value="END" style="ellipse;whiteSpace=wrap;html=1;fillColor=#484f58;strokeColor=#6e7681;fontColor=#ffffff;fontSize=12;fontStyle=1;fontFamily=Segoe UI;shadow=1;" vertex="1" parent="1">
                    <mxGeometry x="450" y="1250" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#161b22;strokeColor=#30363d;strokeWidth=1;" vertex="1" parent="1">
                    <mxGeometry x="850" y="130" width="140" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="850" y="135" width="140" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1c2d41;strokeColor=#388bfd;strokeWidth=2;" vertex="1" parent="1">
                    <mxGeometry x="860" y="170" width="30" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend1-text" value="Process Step" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="895" y="170" width="90" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend2" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#21262d;strokeColor=#30363d;strokeWidth=2;" vertex="1" parent="1">
                    <mxGeometry x="860" y="200" width="30" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend2-text" value="Condition" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="895" y="202" width="90" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend3" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#238636;strokeColor=#2ea043;" vertex="1" parent="1">
                    <mxGeometry x="860" y="235" width="30" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend3-text" value="Start/End" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="895" y="235" width="90" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2c0b0e;strokeColor=#da3633;strokeWidth=2;dashed=1;" vertex="1" parent="1">
                    <mxGeometry x="860" y="265" width="30" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend4-text" value="Skipped Step" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#c9d1d9;fontFamily=Segoe UI;" vertex="1" parent="1">
                    <mxGeometry x="895" y="265" width="90" height="20" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>
